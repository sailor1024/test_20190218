webpackJsonp([22],{GcRt:function(t,e){},IB9x:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("L2qX"),n=s("3n8k"),i=s("oAV5"),l={name:"userMsg",components:{kangyunModal:a.a},methods:{loginOut:function(){var t=this;this.$http.post("index2/login/login_out",{_:this.$store.getters.token}).then(function(e){200===e.data.code?(n.a.removeCookie("name"),localStorage.removeItem("userInfo"),Object(i.c)(),t.$router.push({path:"/account"})):t.$Message.error("退出失败！")})},loginAgain:function(){var t=this;this.$http.post("index2/user/update_user",{id:this.$route.query.id,lastname:this.nameMsg[1].name,firstname:this.nameMsg[0].name,user_type:this.selectValue}).then(function(e){200===e.data.code?t.loginOut():t.$Message.error(e.data.message)})},timestr:function(){this.time?this.timeShow=this.time:this.timeShow="暂无时间信息"},updateMessage:function(){var t=this;this.$http.post("index2/user/update_user",{id:this.$route.query.id,lastname:this.nameMsg[1].name,firstname:this.nameMsg[0].name,user_type:this.selectValue}).then(function(e){200===e.data.code?(t.$Message.success("更新信息成功"),t.$store.dispatch("isRouterReload",!0)):202===e.data.code?t.$Message.error("您没进行任何修改"):t.$Message.error(e.data.message)})},confirm:function(){this.$store.state.userInfo.id===Number(this.$route.query.id)&&this.$store.state.userInfo.user_type!==this.selectValue?this.isShowModal=!0:this.updateMessage()}},created:function(){var t=this;this.$http.post("index2/user/un_userdetil",{id:this.$route.query.id}).then(function(e){if(200===e.data.code){var s=e.data.data;t.username=s.lastname+s.firstname,t.json=s,t.selectValue=s.user_type,t.nameMsg=[{nameTitle:"名字",name:s.firstname},{nameTitle:"姓",name:s.lastname},{nameTitle:"电话",name:s.decrypt_phone},{nameTitle:"电子邮件地址",name:s.decrpyt_email},{nameTitle:"账户类型",name:t.userArr[s.user_type]},{nameTitle:"默认上传文件夹",name:"没有指定上传文件夹"}]}})},data:function(){return{isShowModal:!1,isShowEdit:!1,selectValue:2,selectList:[{value:2,label:"管理员"},{value:3,label:"合作者"}],userArr:{1:"管理员",2:"管理员",3:"合作者"},nameMsg:[{nameTitle:"名字",name:""},{nameTitle:"姓",name:""},{nameTitle:"标题",name:""},{nameTitle:"电话",name:""},{nameTitle:"电子邮件地址",name:"li.wang817@gmail.com"},{nameTitle:"账户类型",name:""},{nameTitle:"默认上传文件夹",name:"没有指定上传文件夹"}],username:"",time:0,user:"",timeShow:"",json:{famailname:"",lastname:"",decrypt_phone:"",decrpyt_email:"",user:""}}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"userMsg"},[s("div",{staticClass:"user-container__left"},[t._m(0),t._v(" "),s("section",{staticClass:"user-container__content"},[s("Row",{attrs:{type:"flex"}},[s("i-col",{staticClass:"x-col user-container__content--weight",attrs:{md:24,lg:12}},[t._v("基本信息")]),t._v(" "),s("i-col",{staticClass:"x-col",attrs:{md:24,lg:12}},[s("div",[s("span",{staticClass:"x-name"},[t._v("创建于")]),t._v(" "),s("span",{staticClass:"x-content",staticStyle:{"margin-left":"12%"}},[t._v(t._s(t._f("formatDate")(1e3*t.json.create_time,"chineseTime")))])])]),t._v(" "),s("i-col",{staticClass:"pl24 x-col",attrs:{md:24,lg:12}},[s("div",[s("span",{staticClass:"x-name"},[t._v("姓")]),t._v(" "),s("span",{staticClass:"x-content"},[t._v(t._s(t.json.lastname))])])]),t._v(" "),s("i-col",{staticClass:"x-col",attrs:{md:24,lg:12}},[s("div",[s("span",{staticClass:"x-name"},[t._v("名字")]),t._v(" "),s("span",{staticClass:"x-content"},[t._v(t._s(t.json.firstname))])])]),t._v(" "),s("i-col",{staticClass:"pl24 x-col",attrs:{md:24,lg:12}},[s("div",[s("span",{staticClass:"x-name"},[t._v("电话")]),t._v(" "),s("span",{staticClass:"x-content"},[t._v(t._s(t.json.decrypt_phone))])])]),t._v(" "),s("i-col",{staticClass:"x-col",attrs:{md:24,lg:12}},[s("div",[s("span",{staticClass:"x-name"},[t._v("账户类型")]),t._v(" "),s("span",{staticClass:"x-content"},[t._v(t._s(t.userArr[t.json.user_type]))])])]),t._v(" "),s("i-col",{staticClass:"pl24 x-col",attrs:{md:24,lg:24}},[s("div",[s("span",{staticClass:"x-name"},[t._v("电子邮件地址")]),t._v(" "),s("span",{staticClass:"x-content"},[t._v(t._s(t.json.decrypt_email))])])]),t._v(" "),s("i-col",{staticClass:"pl24 x-col",attrs:{md:24,lg:24}},[s("div",[s("span",{staticClass:"x-name"},[t._v("默认上传文件夹")]),t._v(" "),s("span",{staticClass:"x-content"},[t._v("没有指定上传文件夹")])])])],1)],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.$store.state.userInfo.user_type,expression:"($store.state.userInfo.user_type !== 3)"}],staticClass:"user-container__right"},[s("div",{staticClass:"background--white"},[t._m(1),t._v(" "),s("section",{staticClass:"right__content"},[s("p",[t._v("账户类型")]),t._v(" "),s("RadioGroup",{model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},t._l(t.selectList,function(e,a){return s("Radio",{key:a,staticClass:"right__radio",attrs:{label:e.value}},[s("span",[t._v(t._s(e.label))])])}),1),t._v(" "),s("p",{staticStyle:{"margin-top":"44px"}},[t._v("默认上传文件夹")]),t._v(" "),s("span",{staticClass:"descript__span"},[t._v("没有指定上传文件夹")]),t._v(" "),s("div",{staticClass:"right__btn"},[s("button",{staticClass:"c-button c-button__primary--radius",on:{click:t.confirm}},[t._v("保存")])])],1)])]),t._v(" "),t.isShowModal?s("kangyun-modal",{attrs:{isShowWarn:"",submitText:"确定"},on:{closeModal:function(e){t.isShowModal=!1},confirm:t.loginAgain}},[s("template",{slot:"title"},[t._v("修改账户类型")]),t._v(" "),s("template",{slot:"detail"},[t._v("修改账户类型将会退出，请问继续修改吗？")])],2):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"user_container__header"},[e("i"),this._v(" "),e("div",{staticClass:"user_container__header__title"},[this._v("用户资料")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"user_container__header"},[e("i"),this._v(" "),e("div",{staticClass:"user_container__header__title"},[this._v("修改用户权限")])])}]};var o=s("VU/8")(l,r,!1,function(t){s("GcRt")},"data-v-91be682e",null);e.default=o.exports}});