webpackJsonp([25],{WXfb:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("mvHQ"),n=a.n(e),r=a("+CDu"),c=a("cWLO"),o={components:{textInput:r.a},data:function(){return{account:{p:"",avatarUrl:"",svg:""},svg:null,upwd:"",cpwd:"",phone:""}},created:function(){this.account=this.$route.params.account,this.account||(this.account=JSON.parse(localStorage.getItem("userList"))[0])},mounted:function(){},methods:{resetPwd:function(){var t=this;if(""===this.upwd)return this.$Message.error("请输入密码"),!1;if(this.upwd.length<8)this.$Message.error("请输入至少8位数的密码");else if(this.upwd.length>16)this.$Message.error("请输入不超过16位数的密码");else if(""===this.cpwd)return this.$Message.error("请重复密码"),!1;var s=/^[\w@0-9]{8,16}$/;return s.test(this.upwd)&&s.test(this.cpwd)?this.upwd!==this.cpwd?(this.$Message.error("两次输入密码不一致"),!1):void this.$http.post("index/user/reset_pass",{phone:Object(c.a)(this.account.p),password:Object(c.a)(this.upwd)}).then(function(s){if(1!==s.data.code)return t.$Message.error("出错了，请重试"),!1;t.$Message.success("重置成功,返回登录页");for(var a=JSON.parse(localStorage.getItem("userList")),e=0;e<a.length;e++)if(t.account.p===a[e].p&&0!==e){a.splice(e,1),a.unshift(t.account),localStorage.setItem("userList",n()(a));break}t.$router.push({path:"/account",name:"accountLogin"})}):(this.$Message.error("密码格式不正确"),!1)}}},i={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"login-accountPast"},[a("h1",{staticClass:"login-title"},[t._v("\n    账号恢复\n  ")]),t._v(" "),a("div",{staticClass:"login-accountname account-form"},[a("div",{staticClass:"login-avatar"},[""===t.account.avatarUrl?a("div",{staticStyle:{background:"transparent"},domProps:{innerHTML:t._s(t.account.svg)}}):t._e(),t._v(" "),""!==t.account.avatarUrl?a("img",{attrs:{src:t.account.avatarUrl,alt:""}}):t._e()]),t._v(" "),a("input",{staticClass:"login-accountname-text",attrs:{type:"text",readonly:""},domProps:{value:t.account.p}})]),t._v(" "),a("div",{staticClass:"login-passwdInput"},[a("div",{staticClass:"account-form"},[a("text-input",{attrs:{label:"重置密码"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.upwd,expression:"upwd"}],staticClass:"cw-dc-input",attrs:{slot:"cw-input-0609",type:"password"},domProps:{value:t.upwd},on:{input:function(s){s.target.composing||(t.upwd=s.target.value)}},slot:"cw-input-0609"})])],1),t._v(" "),a("div",{staticClass:"account-form"},[a("text-input",{attrs:{label:"确认密码"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpwd,expression:"cpwd"}],staticClass:"cw-dc-input",attrs:{slot:"cw-input-0609",type:"password"},domProps:{value:t.cpwd},on:{input:function(s){s.target.composing||(t.cpwd=s.target.value)}},slot:"cw-input-0609"})])],1)]),t._v(" "),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"c-button c-button__primary--radius",on:{click:function(s){s.stopPropagation(),t.resetPwd()}}},[t._v("下一步")])])])},staticRenderFns:[]};var u=a("VU/8")(o,i,!1,function(t){a("vc4r")},null,null);s.default=u.exports},vc4r:function(t,s){}});