webpackJsonp([17],{VTnD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),o=i("quVf"),r=i("8ii8"),n=i("9PDp"),c=i("rmv/"),d=i("0Ejo"),l=i("aaV0"),h=i("Wd8q"),u=i("+i2e"),p=i("qUAm"),f=i("L6bb"),_=i.n(f),g=i("cWLO"),m={props:{projects:{type:Array,default:function(){return[]}},folderProps:{type:Object,required:!0}},data:function(){return{inviteList:[],userSelected:0,userEditType:1,editorType:null,email:""}},methods:{sendItem:function(){var t=this;this.$http.post("index2/email/edit_invite_items",{dir_item_id:this.$route.params.id,email:_()(this.inviteList[this.userSelected].email),type:this.userEditType,file_type:1,edit_type:this.folderProps.edit_type}).then(function(e){200===e.data.code?(3===t.userEditType&&t.getData(),t.$Message.success("修改成功")):t.$Message.error(e.data.message)})},selectUser:function(t){this.userEditType=this.inviteList[t].edit_type,this.userSelected=t},invite:function(){this.$store.dispatch("ModelFolderInvite",{isShow:!0,json:this.folderProps})},getData:function(){var t=this;this.$http.post("index2/index/invite_cooperator_list",{item_dir:this.folderProps.id,project_id:""}).then(function(e){var i=e.data;200===i.code&&(t.inviteList=i.data,t.selectUser(0))})},sendemail:function(){var t=this;if(this.email){if(!this.editorType)return this.$Message.error("请选择合作者权限"),!1;this.$http.post("/index2/email/email",{email:Object(g.a)(this.email),file_type:1,userid:this.$store.state.userInfo.id,type:this.editorType,item_id:this.$route.params.id}).then(function(e){200===e.data.code?(t.$Message.success("邀请成功"),t.getData()):401===e.data.code?t.$Message.error("邀请失败，请重新邀请"):t.$Message.error(e.data.message)})}else this.$Message.error("请输入邮箱")}},created:function(){this.getData()}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"folder-right"},[i("p",{staticClass:"right__title"},[t._v("合作者信息")]),t._v(" "),i("div",{staticClass:"right__container"},[t.inviteList.length?i("div",{staticClass:"right__select__block"},[i("header",{staticClass:"right__container__title"},[t._v("现有合作者")]),t._v(" "),i("i-select",{staticClass:"right__select",on:{"on-change":t.selectUser},model:{value:t.userSelected,callback:function(e){t.userSelected=e},expression:"userSelected"}},t._l(t.inviteList,function(e,s){return i("i-option",{key:s,attrs:{value:s}},[t._v(t._s(e.user_name))])}),1),t._v(" "),i("RadioGroup",{staticClass:"radio__block",model:{value:t.userEditType,callback:function(e){t.userEditType=e},expression:"userEditType"}},[i("Radio",{attrs:{label:1}},[i("span",{staticClass:"radio__span"},[t._v("可以查看")])]),t._v(" "),i("Radio",{attrs:{label:2}},[i("span",{staticClass:"radio__span"},[t._v("可以编辑")])]),t._v(" "),i("Radio",{attrs:{label:3}},[i("span",{staticClass:"radio__span"},[t._v("删除该合作者")])])],1),t._v(" "),i("button",{staticClass:"right__select__button c-button c-button__primary--radius",on:{click:t.sendItem}},[t._v("保存")])],1):t._e(),t._v(" "),i("div",{staticClass:"right__select__bottom"},[i("header",{staticClass:"right__container__title"},[t._v("新增合作者")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入账户协作者的电子邮件地址"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),i("RadioGroup",{staticClass:"radio__block",model:{value:t.editorType,callback:function(e){t.editorType=e},expression:"editorType"}},[i("Radio",{attrs:{label:1}},[i("span",{staticClass:"radio__span"},[t._v("可以查看")])]),t._v(" "),i("Radio",{attrs:{label:2}},[i("span",{staticClass:"radio__span"},[t._v("可以编辑")])])],1),t._v(" "),i("button",{staticClass:"right__select__bottom__button c-button c-button__primary--radius",on:{click:t.sendemail}},[t._v("邀请")])],1)])])},staticRenderFns:[]};var P=i("VU/8")(m,v,!1,function(t){i("aAL9")},"data-v-59491420",null).exports,C={data:function(){return{type:2,title:" ",FolderPop:[],Folder:[],project:[],showCreateIf:!1,EditorCreate:"",EditorProjectIf:!1,EditorProject:"",showDeleteFileIf:!1,showDeleteFileMsg:"",inviteIf:!1,inviteProject:"",searchPages:{page:1,count:0,pageSize:10},checkAll:!1,selectProjectArr:[],selectFolderArr:[],sourcePages:{page:1,count:0,pageSize:10},isShowPage:!1,inviteList:[]}},computed:{showCreateTo:function(){return this.$store.state.showCreateTo},showEditorTo:function(){return this.$store.state.showEditorTo},deleteFileSpace:function(){return this.$store.state.deleteFileSpace},isShow:function(){return this.$store.state.showModal}},watch:{"$route.params.id":function(){this.$store.dispatch("isRouterReload",!0)},showEditorTo:function(t){this.EditorProjectIf=t.isShow,this.EditorProject=t.json},deleteFileSpace:function(t){this.showDeleteFileIf=t.isShow,this.showDeleteFileMsg=t.json},isShow:function(t){this.inviteIf=t.isShow,this.inviteProject=t.json}},created:function(){var t=this.$store.state.Folder;t.id?(this.FolderPop=t,sessionStorage.setItem("FolderId",a()(this.FolderPop))):this.FolderPop=JSON.parse(sessionStorage.getItem("FolderId")),this.FolderPop.id=this.$route.params.id,this.getData()},methods:{soureChange:function(t){this.sourcePages.page=t,this.getData()},transformProjectItem:function(t){var e=this.selectProjectArr.map(function(t){return t.id}).indexOf(t.id);e>-1?this.selectProjectArr.splice(e,1):this.selectProjectArr.push(t)},transformFolderItem:function(t){var e=this.selectFolderArr.map(function(t){return t.id}).indexOf(t.id);e>-1?this.selectFolderArr.splice(e,1):this.selectFolderArr.push(t)},checkAllAction:function(){this.checkAll=!this.checkAll,console.log(this.checkAll)},getData:function(){var t=this;this.$http.post("index2/index/space_list",{user_type:this.$store.state.userInfo.user_type,company_id:this.$store.state.userInfo.company_id,user_id:this.$store.state.userInfo.id,dir_father_id:this.FolderPop.id,items_dir_id:this.FolderPop.id,page:this.sourcePages.page,limit_num:this.sourcePages.pageSize,type:this.type}).then(function(e){if(200===e.data.code){t.project=e.data.data.items.data,t.Folder=e.data.data.dir.data,t.title=e.data.data.parent_name,t.sourcePages.count=e.data.data.count,t.$store.dispatch("folderEditType",e.data.data.edit_type);var i=e.data.data.all_path;i.shift(),t.$store.dispatch("pathList",i),(t.project.length||t.Folder.length)&&(t.isShowPage=!0)}else t.$Message.error(e.data.message)})},getProject:function(){var t=this;this.$http.post("index/file/getproject",{id:this.FolderPop.id,userid:this.$store.state.userInfo.id}).then(function(e){if(1===e.data.code){for(var i=[],s=0;s<e.data.data.length;s++)i.push(e.data.data[s][0]);t.project=i}})},getFolderChilden:function(){var t=this;this.$http.post("index/user/getdirnumber",{dirid:this.FolderPop.id}).then(function(e){for(var i=0;i<e.data.data.length;i++)t.Folder.push(e.data.data[i][0])})},reloadfunc:function(t,e){this.searchPages.page=1,this.searchPages.keyWords=t,this.searchPages.type=e,t&&this.searchfunc()},searchfunc:function(){var t=this;this.$http.post("/index/index/search",{key:this.searchPages.keyWords,userid:this.$store.state.userInfo.id,type:this.searchPages.type,phone:this.$store.state.userInfo.phone,page:this.searchPages.page}).then(function(e){var i=e.data;1===i.code?(t.project=i.data.list,t.searchPages.count=i.data.count):t.$Message.warning("没有找到呢")}).catch(function(){})},changevalue:function(t){this.checkAll=!1,this.type=t,this.sourcePages.page=1,this.getData()},loadNameSort:function(){var t=this;this.$http.post("index/file/dirnameSort",{id:this.FolderPop.id,userid:this.$store.state.userInfo.id}).then(function(e){1===e.data.code&&(t.project=e.data.data.list)})},loadsoure:function(t){this.$http.post("index/file/dirnameSort",{id:this.FolderPop.id,userid:this.$store.state.userInfo.id}).then(function(t){})}},components:{itemListTitle:o.a,itemListSubtitle:r.a,itemListFolder:n.a,ItemListContent:c.a,itemListContentCreate:d.a,itemListContentEditor:l.a,itemListdeletaFile:h.a,itemListModal:u.a,itemListPage:p.a,itemListInvite:P}},j={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"folder-Content"},[i("div",{staticClass:"folder-left"},[i("itemListTitle",{attrs:{json:t.title},on:{childchange:t.reloadfunc}}),t._v(" "),i("itemListSubtitle",{attrs:{originalityData:{files:t.Folder,projects:t.project},isCheckAll:t.checkAll,folderItems:t.selectFolderArr,projectItems:t.selectProjectArr},on:{childchange:t.changevalue,changeCheckStatus:t.checkAllAction,changeShowContentCreate:function(e){t.showCreateIf=arguments[0]}}}),t._v(" "),t._l(t.Folder,function(e){return i("itemListFolder",{key:e.id+"a",attrs:{isCheckAll:t.checkAll,json:e},on:{putInfo:t.transformFolderItem,getThisInfo:function(e){t.EditorCreate=arguments[0]},changeShowContentCreate:function(e){t.showCreateIf=arguments[0]}}})}),t._v(" "),t._l(t.project,function(e,s){return i("ItemListContent",{key:s,attrs:{isCheckAll:t.checkAll,json:e},on:{putInfo:t.transformProjectItem,changeShowContentCreate:function(e){t.showCreateIf=arguments[0]},getThisInfo:function(e){t.EditorCreate=arguments[0]}}})}),t._v(" "),t.showCreateIf?i("itemListContentCreate",{attrs:{projectItems:t.selectProjectArr,FolderItems:t.selectFolderArr},on:{changeShowContentCreate:function(e){t.showCreateIf=arguments[0]}}}):t._e(),t._v(" "),t.EditorProjectIf?i("itemListContentEditor",{attrs:{EditorProject:t.EditorProject}}):t._e(),t._v(" "),t.showDeleteFileIf?i("itemListdeletaFile",{attrs:{showDeleteFileMsg:t.showDeleteFileMsg}}):t._e(),t._v(" "),t.inviteIf?i("item-list-modal",{attrs:{inviteProject:t.inviteProject}}):t._e(),t._v(" "),t.isShowPage?i("item-list-page",{attrs:{pageSize:t.sourcePages.pageSize,current:t.sourcePages.page,count:t.sourcePages.count},on:{pagechange:t.soureChange}}):t._e()],2),t._v(" "),2===t.FolderPop.edit_type||3!==t.$store.userInfo.user_type?i("item-list-invite",{attrs:{projects:t.project,folderProps:t.FolderPop}}):t._e()],1)},staticRenderFns:[]};var y=i("VU/8")(C,j,!1,function(t){i("fUnj")},"data-v-69081c40",null);e.default=y.exports},aAL9:function(t,e){},fUnj:function(t,e){}});