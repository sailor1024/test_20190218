webpackJsonp([28],{"7f/p":function(e,t,i){var s=i("qBvw");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i("rjj0")("665a7296",s,!1,{})},k2sc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("quVf"),n=i("rmv/"),o=i("qUAm"),r=i("8ii8"),a=i("44Gr"),h=i("+i2e"),c=i("aaV0"),d=i("0Ejo"),l=i("9PDp"),u=i("Wd8q"),g={name:"itemSearch",computed:{deleteFileSpace:function(){return this.$store.state.deleteFileSpace},isShow:function(){return this.$store.state.showModal},showEditorTo:function(){return this.$store.state.showEditorTo},showCreateTo:function(){return this.$store.state.showCreateTo},ListerMsgChange:function(){return this.$store.state.ListerMsg},FolderJudgment:function(){return this.$store.state.FolderJudgment},somePage:function(){return this.searchPages.page+this.sourcePage.page}},data:function(){return{isShowLoading:!1,searchText:"",list:this.$store.state.Lister,type:2,issoure:!0,asignarr:[],checkItems:0,checkAll:!1,countnum:0,inviteIf:!1,inviteProject:"",EditorProjectIf:!1,EditorProject:"",showCreateIf:!1,EditorCreate:"",CreateFolderMsg:[],FolderRenameIf:!1,showDeleteFileIf:!1,showDeleteFileMsg:"",isShowSearchPage:!1,isShowSourcePage:!0,searchPages:{page:1,count:0,pageSize:10},sourcePage:{page:1,pageSize:10},selectProjectArr:[],selectFolderArr:[]}},watch:{deleteFileSpace:function(e){this.showDeleteFileIf=e.isShow,this.showDeleteFileMsg=e.json},ListerMsgChange:function(e){this.CreateFolderMsg.push(e)},isShow:function(e){this.inviteIf=e.isShow,this.inviteProject=e.json},showEditorTo:function(e){this.EditorProjectIf=e.isShow,this.EditorProject=e.json},showCreateTo:function(e){this.showCreateIf=e.isShow,this.EditorCreate=e.json},FolderJudgment:function(e){this.loadsoure()},"$route.query":function(e){this.loadData(e)}},methods:{checkAllAction:function(){this.checkAll=!this.checkAll},transformProjectItem:function(e){var t=this.selectProjectArr.map(function(e){return e.id}).indexOf(e.id);t>-1?this.selectProjectArr.splice(t,1):this.selectProjectArr.push(e)},transformFolderItem:function(e){var t=this.selectFolderArr.map(function(e){return e.id}).indexOf(e.id);t>-1?this.selectFolderArr.splice(t,1):this.selectFolderArr.push(e)},changevalue:function(e){this.checkAll=!1,this.type=e,this.sourcePage.page=1,1===this.type?this.loadNameSort(this.type):2===this.type&&this.loadsoure(this.type)},soureChange:function(e){var t=this.$route.query;this.$router.push({name:"search",query:{q:t.q,t:t.t,page:e}})},loadSearch:function(e){this.checkAll=!1,this.searchPages.page=e,this.searchfunc()},reloadfunc:function(e,t){if(this.checkAll=!1,this.searchPages.page=1,this.searchPages.keyWords=e,this.searchPages.type=t,e)this.isShowSearchPage=!0,this.isShowSourcePage=!1,this.searchfunc();else{this.isShowSearchPage=!1,this.isShowSourcePage=!0;var i=this.asignarr;this.list=i,0!==i.length?this.issoure=!0:this.issoure=!1}},searchfunc:function(e,t,i){var s=this;this.$http.post("/index/index/search",{key:this.searchPages.keyWords,userid:this.$store.state.userInfo.id,type:this.searchPages.type,phone:this.$store.state.userInfo.phone,page:this.searchPages.page}).then(function(e){var t=e.data;1===t.code?(s.list=t.data.list,s.searchPages.count=t.data.count):(s.isShowSearchPage=!1,s.$Message.warning("没有找到呢"))}).catch(function(){})},loadsoure:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$http.post("index2/index/space_list",{user_type:this.$store.state.userInfo.user_type,company_id:this.$store.state.userInfo.company_id,user_id:this.$store.state.userInfo.id,dir_father_id:0,items_dir_id:0,page:i,limit_num:10}).then(function(e){t.isShowLoading=!1;var i=e.data;200===i.code?(t.list=i.data.items.data,t.asignarr=i.data.items.data,t.CreateFolderMsg=i.data.dir.data,t.$store.dispatch("moveFolderProject",i.data.dir.data),t.countnum=i.data.count):t.$Message.error("出错了,请重试"),0===t.list.length&&0===t.CreateFolderMsg.length&&(t.issoure=!1)})},loadNameSort:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$http.post("/index/index/nameSort",{userid:this.$store.state.userInfo.id,type:e,page:i,phone:this.$store.state.userInfo.phone}).then(function(e){var i=e.data;1===i.code?(t.list=i.data.list,t.asignarr=i.data.list,t.countnum=i.data.count):t.$Message.error("出错了,请重试"),0===t.list.length&&(t.issoure=!1)})},loadData:function(e){var t=this;this.isShowLoading=!0,this.$http.post("index2/file/search",{key:e.q,type:e.t,page:e.page}).then(function(e){t.isShowLoading=!1;var i=e.data;200===i.code?(t.list=i.data.items.data,t.asignarr=i.data.items.data,t.CreateFolderMsg=i.data.dir.data,t.countnum=i.data.count,window.scrollTo(0,0)):t.$Message.error(i.message),0===t.list.length&&0===t.CreateFolderMsg.length?t.issoure=!1:t.issoure=!0,console.log(t.issoure)})}},created:function(){var e=this.$route.query;this.loadData(e)},destroyed:function(){this.$store.dispatch("showModal",!1)},components:{itemListTitle:s.a,itemListSubtitle:r.a,itemListContent:n.a,itemListPage:o.a,nosoureComponent:a.a,itemListModal:h.a,itemListContentEditor:c.a,itemListContentCreate:d.a,itemListFolder:l.a,itemListdeletaFile:u.a}},m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"itemList"},[e.isShowLoading?i("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),e.inviteIf?i("item-list-modal",{attrs:{inviteProject:e.inviteProject}}):e._e(),e._v(" "),i("item-list-title",{staticStyle:{"margin-bottom":"15px"},attrs:{json:"搜索结果"}}),e._v(" "),e._l(e.CreateFolderMsg,function(t,s){return i("itemListFolder",{key:s+"a",attrs:{page:e.somePage,isCheckAll:e.checkAll,json:t},on:{putInfo:e.transformFolderItem,getThisInfo:function(t){e.EditorCreate=arguments[0]},changeShowContentCreate:function(t){e.showCreateIf=arguments[0]}}})}),e._v(" "),e._l(e.list,function(t,s){return i("item-list-content",{key:s,attrs:{page:e.somePage,isCheckAll:e.checkAll,json:t},on:{putInfo:e.transformProjectItem,changeShowContentCreate:function(t){e.showCreateIf=arguments[0]},getThisInfo:function(t){e.EditorCreate=arguments[0]}}})}),e._v(" "),e.issoure?i("item-list-page",{attrs:{current:parseInt(e.$route.query.page),count:e.countnum},on:{pagechange:e.soureChange}}):e._e(),e._v(" "),e.issoure?e._e():i("nosoureComponent"),e._v(" "),e.EditorProjectIf?i("itemListContentEditor",{attrs:{EditorProject:e.EditorProject}}):e._e(),e._v(" "),e.showCreateIf?i("itemListContentCreate",{attrs:{projectItems:e.selectProjectArr,FolderItems:e.selectFolderArr},on:{changeShowContentCreate:function(t){e.showCreateIf=arguments[0]}}}):e._e(),e._v(" "),e.showDeleteFileIf?i("itemListdeletaFile",{attrs:{showDeleteFileMsg:e.showDeleteFileMsg}}):e._e()],2)};m._withStripped=!0;var p={render:m,staticRenderFns:[]},f=p;var A=!1;var C=i("VU/8")(g,f,!1,function(e){A||i("7f/p")},null,null);C.options.__file="src/components/list/itemlist/ItemSearch.vue";t.default=C.exports},qBvw:function(e,t,i){(e.exports=i("FZ+f")(!0)).push([e.i,"\n.itemList {\n  position: relative;\n  margin-left: 0;\n  padding-bottom: 60px;\n}\n@media screen and (min-width: 992px) {\n.itemList {\n      margin-left: 154px;\n      margin-right: 174px;\n}\n}\n@media screen and (max-width: 1120px) {\n.itemList {\n      margin-left: 70px;\n      margin-right: 70px;\n}\n}\n.itemList > .itemList-contentBox:nth-last-child(2) .ivu-card {\n    border: 1px solid #dddee1;\n}\n.nosoure {\n  width: 300px;\n  height: 100px;\n  line-height: 100px;\n  font-size: 14px;\n  text-align: center;\n  margin: 0 auto;\n}\n","",{version:3,sources:["C:/Users/Administrator/Desktop/git/src/components/list/itemlist/ItemSearch.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,eAAe;EACf,qBAAqB;CACtB;AACD;AACA;MACM,mBAAmB;MACnB,oBAAoB;CACzB;CACA;AACD;AACA;MACM,kBAAkB;MAClB,mBAAmB;CACxB;CACA;AACD;IACI,0BAA0B;CAC7B;AACD;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,gBAAgB;EAChB,mBAAmB;EACnB,eAAe;CAChB",file:"ItemSearch.vue",sourcesContent:["\n.itemList {\n  position: relative;\n  margin-left: 0;\n  padding-bottom: 60px;\n}\n@media screen and (min-width: 992px) {\n.itemList {\n      margin-left: 154px;\n      margin-right: 174px;\n}\n}\n@media screen and (max-width: 1120px) {\n.itemList {\n      margin-left: 70px;\n      margin-right: 70px;\n}\n}\n.itemList > .itemList-contentBox:nth-last-child(2) .ivu-card {\n    border: 1px solid #dddee1;\n}\n.nosoure {\n  width: 300px;\n  height: 100px;\n  line-height: 100px;\n  font-size: 14px;\n  text-align: center;\n  margin: 0 auto;\n}\n"],sourceRoot:""}])}});