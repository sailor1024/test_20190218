webpackJsonp([23],{WD4s:function(e,t){},k2sc:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("quVf"),o=s("rmv/"),r=s("qUAm"),a=s("8ii8"),n=s("44Gr"),h=s("+i2e"),c=s("aaV0"),u=s("0Ejo"),l=s("9PDp"),d=s("Wd8q"),g={name:"itemSearch",computed:{deleteFileSpace:function(){return this.$store.state.deleteFileSpace},isShow:function(){return this.$store.state.showModal},showEditorTo:function(){return this.$store.state.showEditorTo},showCreateTo:function(){return this.$store.state.showCreateTo},ListerMsgChange:function(){return this.$store.state.ListerMsg},FolderJudgment:function(){return this.$store.state.FolderJudgment},somePage:function(){return this.searchPages.page+this.sourcePage.page}},data:function(){return{isShowLoading:!1,searchText:"",list:this.$store.state.Lister,type:2,issoure:!0,asignarr:[],checkItems:0,checkAll:!1,countnum:0,inviteIf:!1,inviteProject:"",EditorProjectIf:!1,EditorProject:"",showCreateIf:!1,EditorCreate:"",CreateFolderMsg:[],FolderRenameIf:!1,showDeleteFileIf:!1,showDeleteFileMsg:"",isShowSearchPage:!1,isShowSourcePage:!0,searchPages:{page:1,count:0,pageSize:10},sourcePage:{page:1,pageSize:10},selectProjectArr:[],selectFolderArr:[]}},watch:{deleteFileSpace:function(e){this.showDeleteFileIf=e.isShow,this.showDeleteFileMsg=e.json},ListerMsgChange:function(e){this.CreateFolderMsg.push(e)},isShow:function(e){this.inviteIf=e.isShow,this.inviteProject=e.json},showEditorTo:function(e){this.EditorProjectIf=e.isShow,this.EditorProject=e.json},showCreateTo:function(e){this.showCreateIf=e.isShow,this.EditorCreate=e.json},FolderJudgment:function(e){this.loadsoure()},"$route.query":function(e){this.loadData(e)}},methods:{checkAllAction:function(){this.checkAll=!this.checkAll},transformProjectItem:function(e){var t=this.selectProjectArr.map(function(e){return e.id}).indexOf(e.id);t>-1?this.selectProjectArr.splice(t,1):this.selectProjectArr.push(e)},transformFolderItem:function(e){var t=this.selectFolderArr.map(function(e){return e.id}).indexOf(e.id);t>-1?this.selectFolderArr.splice(t,1):this.selectFolderArr.push(e)},changevalue:function(e){this.checkAll=!1,this.type=e,this.sourcePage.page=1,1===this.type?this.loadNameSort(this.type):2===this.type&&this.loadsoure(this.type)},soureChange:function(e){var t=this.$route.query;this.$router.push({name:"search",query:{q:t.q,t:t.t,page:e}})},loadSearch:function(e){this.checkAll=!1,this.searchPages.page=e,this.searchfunc()},reloadfunc:function(e,t){if(this.checkAll=!1,this.searchPages.page=1,this.searchPages.keyWords=e,this.searchPages.type=t,e)this.isShowSearchPage=!0,this.isShowSourcePage=!1,this.searchfunc();else{this.isShowSearchPage=!1,this.isShowSourcePage=!0;var s=this.asignarr;this.list=s,0!==s.length?this.issoure=!0:this.issoure=!1}},searchfunc:function(e,t,s){var i=this;this.$http.post("/index/index/search",{key:this.searchPages.keyWords,userid:this.$store.state.userInfo.id,type:this.searchPages.type,phone:this.$store.state.userInfo.phone,page:this.searchPages.page}).then(function(e){var t=e.data;1===t.code?(i.list=t.data.list,i.searchPages.count=t.data.count):(i.isShowSearchPage=!1,i.$Message.warning("没有找到呢"))}).catch(function(){})},loadsoure:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$http.post("index2/index/space_list",{user_type:this.$store.state.userInfo.user_type,company_id:this.$store.state.userInfo.company_id,user_id:this.$store.state.userInfo.id,dir_father_id:0,items_dir_id:0,page:s,limit_num:10}).then(function(e){t.isShowLoading=!1;var s=e.data;200===s.code?(t.list=s.data.items.data,t.asignarr=s.data.items.data,t.CreateFolderMsg=s.data.dir.data,t.$store.dispatch("moveFolderProject",s.data.dir.data),t.countnum=s.data.count):t.$Message.error("出错了,请重试"),0===t.list.length&&0===t.CreateFolderMsg.length&&(t.issoure=!1)})},loadNameSort:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$http.post("/index/index/nameSort",{userid:this.$store.state.userInfo.id,type:e,page:s,phone:this.$store.state.userInfo.phone}).then(function(e){var s=e.data;1===s.code?(t.list=s.data.list,t.asignarr=s.data.list,t.countnum=s.data.count):t.$Message.error("出错了,请重试"),0===t.list.length&&(t.issoure=!1)})},loadData:function(e){var t=this;this.isShowLoading=!0,this.$http.post("index2/file/search",{key:e.q,type:e.t,page:e.page}).then(function(e){t.isShowLoading=!1;var s=e.data;200===s.code?(t.list=s.data.items.data,t.asignarr=s.data.items.data,t.CreateFolderMsg=s.data.dir.data,t.countnum=s.data.count,window.scrollTo(0,0)):t.$Message.error(s.message),0===t.list.length&&0===t.CreateFolderMsg.length?t.issoure=!1:t.issoure=!0,console.log(t.issoure)})}},created:function(){var e=this.$route.query;this.loadData(e)},destroyed:function(){this.$store.dispatch("showModal",!1)},components:{itemListTitle:i.a,itemListSubtitle:a.a,itemListContent:o.a,itemListPage:r.a,nosoureComponent:n.a,itemListModal:h.a,itemListContentEditor:c.a,itemListContentCreate:u.a,itemListFolder:l.a,itemListdeletaFile:d.a}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"itemList"},[e.isShowLoading?s("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),e.inviteIf?s("item-list-modal",{attrs:{inviteProject:e.inviteProject}}):e._e(),e._v(" "),s("item-list-title",{staticStyle:{"margin-bottom":"15px"},attrs:{json:"搜索结果"}}),e._v(" "),e._l(e.CreateFolderMsg,function(t,i){return s("itemListFolder",{key:i+"a",attrs:{page:e.somePage,isCheckAll:e.checkAll,json:t},on:{putInfo:e.transformFolderItem,getThisInfo:function(t){e.EditorCreate=arguments[0]},changeShowContentCreate:function(t){e.showCreateIf=arguments[0]}}})}),e._v(" "),e._l(e.list,function(t,i){return s("item-list-content",{key:i,attrs:{page:e.somePage,isCheckAll:e.checkAll,json:t},on:{putInfo:e.transformProjectItem,changeShowContentCreate:function(t){e.showCreateIf=arguments[0]},getThisInfo:function(t){e.EditorCreate=arguments[0]}}})}),e._v(" "),e.issoure?s("item-list-page",{attrs:{current:parseInt(e.$route.query.page),count:e.countnum},on:{pagechange:e.soureChange}}):e._e(),e._v(" "),e.issoure?e._e():s("nosoureComponent"),e._v(" "),e.EditorProjectIf?s("itemListContentEditor",{attrs:{EditorProject:e.EditorProject}}):e._e(),e._v(" "),e.showCreateIf?s("itemListContentCreate",{attrs:{projectItems:e.selectProjectArr,FolderItems:e.selectFolderArr},on:{changeShowContentCreate:function(t){e.showCreateIf=arguments[0]}}}):e._e(),e._v(" "),e.showDeleteFileIf?s("itemListdeletaFile",{attrs:{showDeleteFileMsg:e.showDeleteFileMsg}}):e._e()],2)},staticRenderFns:[]};var p=s("VU/8")(g,f,!1,function(e){s("WD4s")},null,null);t.default=p.exports}});