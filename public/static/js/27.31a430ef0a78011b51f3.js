webpackJsonp([27],{JPYv:function(t,e){},"Q1+I":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("mvHQ"),i=s.n(a),n=s("+CDu"),o=s("cWLO"),c=s("L6bb"),r=s.n(c),u={components:{textInput:n.a},watch:{number:function(t){t<=0&&(clearInterval(this.timer),this.timer=null,this.disabled=!1,this.type="primary",this.showMsg=!1)}},data:function(){return{number:0,showMsg:!1,timer:null,account:{p:"",avatarUrl:"",svg:""},phone:"",code:"",captcha:"=11111=",disabled:!1,type:"primary",upwd:"",cpwd:""}},created:function(){null!==localStorage.getItem("userList")?(this.account=JSON.parse(localStorage.getItem("userList"))[0],this.account.p=""):(this.account=this.$route.query,this.account.p="")},destroyed:function(){null!=this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{toFindStep2:function(){var t=this;if(""===this.account.p)return this.$Message.error("请输入手机号"),!1;if(!/^1[0-9]{10}$/.test(this.account.p))return this.$Message.error("请输入正确的手机号"),!1;if(""===this.code)return this.$Message.error("请输入验证码"),!1;if(""===this.upwd)return this.$Message.error("请输入密码"),!1;if(this.upwd.length<8)this.$Message.error("请输入至少8位数的密码");else if(this.upwd.length>16)this.$Message.error("请输入不超过16位数的密码");else if(""===this.cpwd)return this.$Message.error("请输入重复密码"),!1;var e=/^[\w@0-9]{8,16}$/;return e.test(this.upwd)&&e.test(this.cpwd)?this.upwd!==this.cpwd?(this.$Message.error("两次输入密码不一致"),!1):void this.$http.post("index2/login/reset_pass",{phone_code:this.code,new_password:r()(this.cpwd),phone:r()(this.account.p)},{isNeedToken:!1}).then(function(e){if(200===e.data.code){t.$Message.success("重置成功,返回登录页");for(var s=JSON.parse(localStorage.getItem("userList")),a=0;a<s.length;a++)if(t.account.p===s[a].p&&0!==a){s.splice(a,1),s.unshift(t.account),localStorage.setItem("userList",i()(s));break}t.$router.push({path:"/account",name:"accountLogin"})}else t.$Message.error(e.data.message)}):(this.$Message.error("密码格式不正确"),!1)},getCode:function(){if(this.showMsg)return!1;this.getcaptche()},getcaptche:function(){var t=this;this.$http.post("index2/login/captche_code",{verify_code_type:2,phone:Object(o.a)(this.account.p)}).then(function(e){var s=e.data;200===s.code?(t.captcha=s.data.captche,t.$Message.info("验证码已发送，请在60秒内输入"),t.showMsg=!0,t.disabled=!0,t.type="default",t.number=60,t.count(60)):t.$Message.error(e.data.message)}).catch(function(){})},count:function(t){var e=this;t>0?this.timer=setInterval(function(){e.number-=1},1e3):(clearInterval(this.timer),this.timer=null)},toLogin:function(){this.$router.push("/account/login")}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account-findStep1"},[s("h1",{staticClass:"account-title"},[t._v("\n    找回密码\n  ")]),t._v(" "),s("div",{staticClass:"login-accountname"},[s("div",{staticClass:"login-avatar"},[""===t.account.avatarUrl?s("div",{staticStyle:{background:"transparent"},domProps:{innerHTML:t._s(t.account.svg)}}):s("img",{attrs:{src:t.account.avatarUrl,alt:""}})]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.account.p,expression:"account.p"}],staticClass:"login-accountname-text",attrs:{type:"text",placeholder:"请输入手机号",autocomplete:"new-password"},domProps:{value:t.account.p},on:{input:function(e){e.target.composing||t.$set(t.account,"p",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"login-find-tip"},[s("div",{staticClass:"login-find-phoneInput account-form"},[s("text-input",{attrs:{label:"输入验证码"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"cw-dc-input",attrs:{slot:"cw-input-0609",type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}},slot:"cw-input-0609"})]),t._v(" "),s("Button",{staticStyle:{flex:"1",height:"36px",position:"relative",top:"10px","margin-left":"8px"},attrs:{type:t.type,disabled:t.disabled},on:{click:function(e){t.getCode()}}},[t._v("获取验证码")])],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMsg,expression:"showMsg"}],staticClass:"countDown"},[s("p",[t._v(t._s("验证码"+t.number+"秒后过期"))])]),t._v(" "),s("div",{staticClass:"account-form"},[s("text-input",{attrs:{label:"重置密码"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.upwd,expression:"upwd"}],staticClass:"cw-dc-input",attrs:{slot:"cw-input-0609",type:"password"},domProps:{value:t.upwd},on:{input:function(e){e.target.composing||(t.upwd=e.target.value)}},slot:"cw-input-0609"})])],1),t._v(" "),s("div",{staticClass:"account-form"},[s("text-input",{attrs:{label:"确认密码"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.cpwd,expression:"cpwd"}],staticClass:"cw-dc-input",attrs:{slot:"cw-input-0609",type:"password"},domProps:{value:t.cpwd},on:{input:function(e){e.target.composing||(t.cpwd=e.target.value)}},slot:"cw-input-0609"})])],1)]),t._v(" "),s("div",{staticClass:"login-utilities"},[s("div",{staticClass:"login-utilities-left"},[s("a",{attrs:{href:"javascript;"},on:{click:function(e){e.preventDefault(),t.toLogin()}}},[t._v("返回登录页")])]),t._v(" "),s("div",{staticClass:"login-utilities-right"})]),t._v(" "),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"c-button c-button__primary--radius",on:{click:function(e){t.toFindStep2()}}},[t._v("下一步")])])])},staticRenderFns:[]};var p=s("VU/8")(u,l,!1,function(t){s("JPYv")},"data-v-1e297dd0",null);e.default=p.exports}});